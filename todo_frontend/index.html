<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Todo Liste</title>
</head>

<body onload="loadTodos()">
	<h1>Todo-Liste</h1>

	<form onsubmit="addTodo(); return false;">
		<input type="text" placeholder="Neues Todo" id="todoInput">
		<button>Hinzuf√ºgen</button>
	</form>

	<ul id="todoList">
		<li>Laden...</li>
	</ul>

	<script>

		let todos = [];

		async function loadTodos() {
			const url = 'http://localhost:3000/todos'
			let response = await fetch(url);

			todos = await response.json();
			render();
		}

		function addTodo() {
			event.preventDefault();
			const todoInput = document.getElementById("todoInput");
			let todoText = todoInput.value;
			todos.push({ title: todoText });
			todoInput.value = "";
			addToServer(todoText);
			render();
		}

		function render() {
			let todoList = document.getElementById("todoList");
			todoList.innerHTML = "";
			todos.forEach((todo) => {
				let li = document.createElement("li");
				li.textContent = todo.title;
				todoList.appendChild(li);
			});
		}

		function addToServer(todoText) {
			fetch('http://127.0.0.1:3000/todos', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json; charset=UTF-8'
				},
				body: JSON.stringify({ title: todoText })
			});
		}
	</script>
</body>

</html>

</script>
</body>

</html>